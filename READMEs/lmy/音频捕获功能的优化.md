# 音频捕获功能的优化

[TOC]

todo：这个先留着，后来发

##前言

​	在长时间的攻坚深度学习框架后，我决定开始完善和搭建嵌入式平台上的软件系统，首先，我们需要将基础设施变得更加完善。我们之前提到过，音频捕获部分效果不好，经过进一步试探，发现问题还是比较严重的：

- 简单根据响度来判断声音是否有效是低效的方式，有些时候环境噪音甚至录音设备的底噪都是十分难缠的，提取出的有效信息很难说是人声
- 以波的周期为单位截取人声不置可否，但是依靠样本相变来判断周期是一定不靠谱的，由于采样设备和采样率的缘故，有的时候连续很长时间也不会出现相变的情况，很难保证缓冲区不溢出

综上所述，我们接下来的改进思路就是：

1. 完善周期确定方式和采样点
2. 在响度判断安静的基础上加上频率判断人声是否存在

## 改进设计

我们在原有实现的基础上，需要对采样时记录的参数进行拓展，加入频率的计算，其实比较简单，记录一个周期波形的长度就可以实现这个功能。我们只要将频率不在人声范围内的波形也视为噪音，就可以实现频率区分

而对于周期识别目前还没有想到好的办法。首先我判断在树莓派上做傅里叶变换是得不偿失的，其次使用定长窗口由不容易解决周期截断问题，所以维持现状，通过对频率部分的改进完善这一部分

## 实现

